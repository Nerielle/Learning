@using Sandbox.Models
@model IEnumerable<Sandbox.Models.Book>

@{
    ViewBag.Title = "Books";
}

<h2>Books</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>


    <table class="table table-hover table-responsive table-striped">
        <thead>
            <tr>
                @*<th>@Html.DisplayNameFor(model => model.Author.FirstName)</th>*@
                <th>@Html.DisplayNameFor(model => model.Title)</th>
                <th>@Html.DisplayNameFor(model => model.Isbn)</th>
                <th>@Html.DisplayNameFor(model => model.Synopsis)</th>
                <th>@Html.DisplayNameFor(model => model.Description)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: books">
            <tr>
                @*<td data-bind="text: Author.FirstName"></td>*@
                <td data-bind="text: Title"></td>
                <td data-bind="text: Isbn"></td>
                <td data-bind="text: Synopsis"></td>
                <td data-bind="text: Description"></td>
                <td><span>
                    <a data-bind="attr: {href: '@Url.Action("Details")/' + Id}" class="btn-link">Details</a> | 
                        <a data-bind="attr: {href: '@Url.Action("Edit")/' + Id}" class="btn-link">Edit</a> | 
                        <a data-bind="attr: {href: '@Url.Action("Delete")/' + Id}" class="btn-link">Delete</a>
                    </span></td>
            </tr>
        </tbody>
    </table>
<hr/>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Author.FirstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Isbn)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Synopsis)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th></th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Author.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Isbn)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Synopsis)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>
    }

</table>
@section Scripts{
    <script>
        function ViewModel(books){
        var self = this;
        self.books = books;
        };
        var viewModel = new ViewModel(@Html.HtmlConvertToJson(Model));
        ko.applyBindings(viewModel);
    </script>
    }
